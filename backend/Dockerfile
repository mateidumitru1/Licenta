FROM maven:3.9.6-amazoncorretto-21 AS build
ARG JAR_FILE=target/*.jar
COPY ./target/backend-latest.jar app.jar
ENTRYPOINT ["java","-jar","/app.jar"]

EXPOSE 8080

ARG DB_URL
ARG DB_NAME
ARG DB_USER
ARG DB_PASSWORD
ARG MAPBOX_API_KEY
ARG SENDGRID_API_KEY
ARG JWT_SECRET_KEY

ENV PGSQL_URL=$DB_URL
ENV PGSQL_DB=$DB_NAME
ENV PGSQL_USER=$DB_USER
ENV PGSQL_PASSWORD=$DB_PASSWORD
ENV MAPBOX_API_KEY=$MAPBOX_API_KEY
ENV SENDGRID_API_KEY=$SENDGRID_API_KEY
ENV JWT_SECRET_KEY=$JWT_SECRET_KEY
